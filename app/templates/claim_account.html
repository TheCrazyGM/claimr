{% extends 'base.html' %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mt-4">
    <h1>
      <i class="bi bi-person-plus me-2"></i>Create New Hive Account
    </h1>
    <button id="top-reset-btn" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-counterclockwise"></i> Start Over
    </button>
  </div>
  <hr />
  <div class="row g-3 mt-3">
    <div class="col-md-6">
      <label for="claimer-username" class="form-label"
        >Your existing username</label
      >
      <div class="input-group">
        <span class="input-group-text">@</span>
        <input
          type="text"
          id="claimer-username"
          class="form-control"
          placeholder="current account"
          autocomplete="username"
        />
        <button id="check-claimer-btn" class="btn btn-primary" type="button">
          <i class="bi bi-check-circle"></i> Check RC & Claims
        </button>
      </div>
      <div class="form-text" id="claimer-status"></div>
    </div>
    <div class="col-md-6">
      <label for="new-username" class="form-label"
        >Desired new account name</label
      >
      <div class="input-group">
        <span class="input-group-text">@</span>
        <input
          type="text"
          id="new-username"
          class="form-control"
          placeholder="new account"
          autocomplete="off"
        />
        <button
          id="check-newuser-btn"
          class="btn btn-primary"
          type="button"
        >
          <i class="bi bi-search"></i> Check Availability
        </button>
      </div>
      <div class="form-text" id="newuser-status"></div>
    </div>
  </div>

  <div class="row g-3 mt-4" id="password-section" style="display:none;">
    <div class="col-12">
      <label for="password" class="form-label"
        >Generated password (editable)</label
      >
      <div class="input-group">
        <input
          type="text"
          id="password"
          class="form-control"
          autocomplete="new-password"
        />
        <button
          id="regen-pass-btn"
          class="btn btn-outline-secondary"
          type="button"
        >
          <i class="bi bi-arrow-repeat"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="row mt-4" id="keys-section" style="display:none;">
    <div class="col-12">
      <h4>Your new account keys</h4>
      <pre class="bg-light p-3 border" id="keys-display"></pre>
      <div class="d-flex gap-2">
        <button id="download-keys-btn" class="btn btn-outline-success">
          <i class="bi bi-download"></i> Download Keys
        </button>
        <button id="reset-flow-btn" class="btn btn-outline-danger">
          <i class="bi bi-arrow-counterclockwise"></i> Cancel / Reset
        </button>
      </div>
      <div class="alert alert-warning mt-2">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <strong>Important:</strong> You must download your keys before you can
        create the account. Keep these keys safe - they are required to access
        your account!
      </div>
    </div>
  </div>

  <!-- Toast container -->
  <div
    class="toast-container position-fixed bottom-0 end-0 p-3"
    id="toastContainer"
  ></div>

  <div class="row mt-4" id="submit-section" style="display:none;">
    <div class="col-12 text-center">
      <button id="create-account-btn" class="btn btn-lg btn-success" disabled>
        <i class="bi bi-person-check"></i> Create Account with Keychain
      </button>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://unpkg.com/@hiveio/dhive@1.3.2/dist/dhive.js"></script>
  <script src="{{ url_for('static', filename='js/words.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bip39.js') }}"></script>
  <script src="{{ url_for('static', filename='js/claim_account.js') }}"></script>
{% endblock %}
